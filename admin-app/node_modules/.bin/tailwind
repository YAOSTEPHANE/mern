#!/bin/sh

# Get the basedir using realpath for portability
if command -v realpath &>/dev/null; then
  basedir=$(realpath "$(dirname "$0")")
elif [ -n "$(command -v readlink -f)" ]; then
  basedir=$(readlink -f "$(dirname "$0")")
else
  basedir=$(cd "$(dirname "$0")" && pwd)
fi

# Use nodejs if available, fallback to node
if command -v nodejs &>/dev/null; then
  NODE=nodejs
else
  NODE=node
fi

# Use the basedir/node if it exists, otherwise use the global node_modules
if [ -x "$basedir/node" ]; then
  exec "$NODE" "$basedir/../tailwindcss/lib/cli.js" "$@"
else
  exec "$NODE" "$(command -v npx || command -v yarn)" tailwindcss "$@"
fi
