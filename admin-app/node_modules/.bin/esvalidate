#!/bin/sh

# Get the directory of the current script
basedir=$(dirname "$(readlink -f "$0")")

# Check if the current system is Windows and convert the path accordingly
if echo "$basedir" | grep -q '/'; then
  if command -v cygpath >/dev/null 2>&1; then
    basedir=$(cygpath -w "$basedir")
  fi
fi

# Check if the node executable exists in the basedir and execute it
if [ -x "$basedir/node" ]; then
  exec "$basedir/node" "$basedir/../esprima/bin/esvalidate.js" "$@"
# Otherwise, use the system's node executable
else
  exec node "$basedir/../esprima/bin/esvalidate.js" "$@"
fi
