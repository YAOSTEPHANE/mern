#!/bin/sh

# Get the basedir using realpath, which is more reliable than dirname and sed
basedir=$(realpath "$(dirname "$0")")

# Use $(command) instead of backticks for command substitution, it's easier to read
case $(uname) in
    *CYGWIN*|*MINGW*|*MSYS*)
        # Use cygpath -u instead of -w to convert to a Unix-style path
        basedir=$(cygpath -u "$basedir")
        ;;
esac

# Use -f instead of -x to check if a file exists and is executable
if [ -f "$basedir/node" ] && [ -x "$basedir/node" ]; then
  exec "$basedir/node" "$basedir/../resolve/bin/resolve" "$@"
else
  exec node "$basedir/../resolve/bin/resolve" "$@"
fi

