#!/usr/bin/env pwsh

$scriptDir = Split-Path $MyInvocation.MyCommand.Definition -Parent
$exe = if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) { ".exe" } else { "" }
$babelParserPath = "$scriptDir/../@babel/parser/bin/babel-parser$exe"

if (-not (Test-Path $babelParserPath)) {
    Write-Error "Babel parser not found at '$babelParserPath'"
    exit 1
}

& "$scriptDir/node$exe" $babelParserPath @args
exit $LASTEXITCODE
