#!/bin/sh

# Get the basedir using realpath, which is more reliable than dirname and sed
basedir=$(realpath "$(dirname "$0")")

# Use $(command) instead of backticks for command substitution, it's easier to read
case $(uname) in
    *CYGWIN*|*MINGW*|*MSYS*)
        basedir=$(cygpath -w "$basedir")
    ;;
esac

# Use -a option with if [ -x "$basedir/node" ] to avoid "command not found" error message
if [ -x "$basedir/node" ]; then
  exec "$basedir/node"  "$basedir/../mkdirp/bin/cmd.js" "$@"
else
  # Use $(command) instead of backticks for command substitution, it's easier to read
  exec $(command -v node)  "$basedir/../mkdirp/bin/cmd.js" "$@"
fi

