/*!
 * word-wrap <https://github.com/jonschlinkert/word-wrap>
 *
 * Copyright (c) 2014-2023, Jon Schlinkert.
 * Released under the MIT License.
 */

const isNumber = (value) => typeof value === 'number' && !isNaN(value);

function trimTabAndSpaces(str) {
  return str.trimEnd();
}

module.exports = function(str, options) {
  options = options || {};
  if (str == null) {
    return str;
  }

  const width = isNumber(options.width) ? options.width : 50;
  const indent = typeof options.indent === 'string' ? options.indent : '';

  const newline = options.newline || '\n' + indent;
  const escape = typeof options.escape === 'function' ? options.escape : (str) => str;

  const regexString = `.{1,${width}}(\\s|$)`;
  const re = new RegExp(regexString, 'g');
  const lines = str.match(re) || [];
  const result = lines.map((line) => {
    if (line.slice(-1) === '\n') {
      line = line.slice(0, line.length - 1);
    }
    return escape(line);
  }).join(newline);

  if (options.trim === true) {
    result = trimTabAndSpaces(result);
  }
  return result;
};

function identity(str) {
  return str;
}

// Tests
const assert = require('assert');
const wordWrap = require('./word-wrap');

const str = `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet
