const { OverloadYield } = require('./OverloadYield.js');

function asyncGeneratorDelegate(fn) {
  const generator = fn(async (value) => {
    return new OverloadYield(value, 1);
  });

  return {
    [Symbol.iterator]: function* () {
      yield* generator;
    },
    next: function (value) {
      return generator.next(value);
    },
    throw: function (error) {
      return generator.throw(error);
    },
    return: function (value) {
      return generator.return(value);
    }
  };
}

module.exports = asyncGeneratorDelegate;
module.exports.__esModule = true;
module.exports.default = asyncGeneratorDelegate;
