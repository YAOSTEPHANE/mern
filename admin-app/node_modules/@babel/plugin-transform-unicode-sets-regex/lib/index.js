"use strict";

const {
  declare,
  assertVersion
} = require("@babel/helper-plugin-utils");
const {
  createRegExpFeaturePlugin
} = require("@babel/helper-create-regexp-features-plugin");

const transformUnicodeSetsRegex = declare((api) => {
  assertVersion(api, 7);

  return createRegExpFeaturePlugin({
    name: "transform-unicode-sets-regex",
    feature: "unicodeSetsFlag",
    manipulateOptions(opts, parserOpts) {
      if (!parserOpts.plugins) parserOpts.plugins = [];
      parserOpts.plugins.push("regexpUnicodeSets");
    }
  });
});

module.exports = transformUnicodeSetsRegex;
