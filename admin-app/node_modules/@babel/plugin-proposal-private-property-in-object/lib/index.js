const maybeWarn = () => {
  try {
    const stackTraceLimit = Error.stackTraceLimit;
    Error.stackTraceLimit = Infinity;
    const stack = new Error().stack;
    Error.stackTraceLimit = stackTraceLimit;

    if (stack.includes("babel-preset-react-app")) {
      const fallbackPlugin = require("@babel/plugin-transform-private-property-in-object");
      module.exports = fallbackPlugin;

      setTimeout(() => {
        console.warn(
          `\x1B[0;33mOne of your dependencies, babel-preset-react-app, is importing the "@babel/plugin-proposal-private-property-in-object" package without declaring it in its dependencies. This is currently working because "@babel/plugin-proposal-private-property-in-object" is already in your node_modules folder for unrelated reasons, but it may break at any time.\n\n` +
          `babel-preset-react-app is part of the create-react-app project, which is not maintained anymore. It is thus unlikely that this bug will ever be fixed. Add "@babel/plugin-proposal-private-property-in-object" to your devDependencies to work around this error. This will make this message go away.\x1B[0m`
        );
      }, 2500);

      return;
    }
  } catch (e) {}

  throw new Error(
    `--- PLACEHOLDER PACKAGE ---\n` +
    `This @babel/plugin-proposal-private-property-in-object version is not meant to be imported. Something is importing @babel/plugin-proposal-private-property-in-object without declaring it in its dependencies (or devDependencies) in the package.json file.\n` +
    `Add "@babel/plugin-proposal-private-property-in-object" to your devDependencies to work around this error. This will make this message go away.`
  );
};
