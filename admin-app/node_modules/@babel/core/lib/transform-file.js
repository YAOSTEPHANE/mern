"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.transformFile = transformFile;
exports.transformFileAsync = transformFileAsync;
exports.transformFileSync = transformFileSync;

const fs = require("./gensync-utils/fs.js");
const gensync = require("gensync");
const config = require("./config/index.js");
const transformation = require("./transformation/index.js");

const transformFileRunner = gensync()(function* (filename, opts) {
  const options = Object.assign({}, opts, { filename });
  const configObj = yield config(options);
  if (configObj === null) return null;
  const code = yield fs.readFile(filename, "utf8");
  return yield transformation.run(configObj, code);
});

function transformFile(...args) {
  transformFileRunner.apply(null, args);
}

function transformFileSync(...args) {
  return transformFileRunner.sync.apply(transformFileRunner, args);
}

function transformFileAsync(...args) {
  return new Promise((resolve, reject) => {
    transformFileRunner.apply(null, args, (err, result) => {
      if (err) {
        return reject(err);
      }
      resolve(result);
    });
  });
}

//# sourceMappingURL=transform-file.js.map
