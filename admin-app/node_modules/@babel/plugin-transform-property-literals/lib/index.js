"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const { isValidES3Identifier } = require("@babel/types");
const { declare } = require("@babel/helper-plugin-utils");
const core = require("@babel/core");

const transformPropertyLiterals = declare((api) => {
  api.assertVersion(7);

  return {
    name: "transform-property-literals",
    visitor: {
      ObjectProperty: {
        exit(path) {
          const { node } = path;
          const key = node.key;

          // Check if the key is a non-computed, identifer, and not a valid ES3 identifier
          if (!node.computed && core.types.isIdentifier(key) && !isValidES3Identifier(key.name)) {
            // Replace the key with a string literal
            path.node.key = core.types.stringLiteral(key.name);
          }
        }
      }
    }
  };
});

exports.default = transformPropertyLiterals;
