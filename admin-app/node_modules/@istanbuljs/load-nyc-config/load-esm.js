'use strict';

const {pathToFileURL} = require('url');

module.exports = async function(filename) {
  try {
    const mod = await import(pathToFileURL(filename));
    if (!('default' in mod)) {
      throw new Error(`${filename} has no default export`);
    }
    return mod.default;
  } catch (err) {
    console.error(err);
    process.exit(1);
  }
};
